<script setup>
import { graphic, use } from 'echarts/core'
import { SVGRenderer } from 'echarts/renderers'
import { LineChart, PieChart } from 'echarts/charts'
import {
  DataZoomComponent,
  GridComponent,
  LegendComponent,
  TitleComponent,
  ToolboxComponent,
  TooltipComponent,
} from 'echarts/components'

import VChart from 'vue-echarts'
import { ref } from 'vue'

use([
  SVGRenderer,
  PieChart,
  TitleComponent,
  TooltipComponent,
  LegendComponent,
  ToolboxComponent,
  GridComponent,
  DataZoomComponent,
  LineChart,
])


const res = {
    "data": [
        {
            "trading_date": [
                "2015/4/5",
                "2015/4/12",
                "2015/4/19",
                "2015/4/26",
                "2015/5/3",
                "2015/5/10",
                "2015/5/17",
                "2015/5/24",
                "2015/5/31",
                "2015/6/7",
                "2015/6/14",
                "2015/6/21",
                "2015/6/28",
                "2015/7/5",
                "2015/7/12",
                "2015/7/19",
                "2015/7/26",
                "2015/8/2",
                "2015/8/9",
                "2015/8/16",
                "2015/8/23",
                "2015/8/30",
                "2015/9/6",
                "2015/9/13",
                "2015/9/20",
                "2015/9/27",
                "2015/10/4",
                "2015/10/11",
                "2015/10/18",
                "2015/10/25",
                "2015/11/1",
                "2015/11/8",
                "2015/11/15",
                "2015/11/22",
                "2015/11/29",
                "2015/12/6",
                "2015/12/13",
                "2015/12/20",
                "2015/12/27",
                "2016/1/3",
                "2016/1/10",
                "2016/1/17",
                "2016/1/24",
                "2016/1/31",
                "2016/2/7",
                "2016/2/21",
                "2016/2/28",
                "2016/3/6",
                "2016/3/13",
                "2016/3/20",
                "2016/3/27",
                "2016/4/3",
                "2016/4/10",
                "2016/4/17",
                "2016/4/24",
                "2016/5/1",
                "2016/5/8",
                "2016/5/15",
                "2016/5/22",
                "2016/5/29",
                "2016/6/5",
                "2016/6/12",
                "2016/6/19",
                "2016/6/26",
                "2016/7/3",
                "2016/7/10",
                "2016/7/17",
                "2016/7/24",
                "2016/7/31",
                "2016/8/7",
                "2016/8/14",
                "2016/8/21",
                "2016/8/28",
                "2016/9/4",
                "2016/9/11",
                "2016/9/18",
                "2016/9/25",
                "2016/10/2",
                "2016/10/16",
                "2016/10/23",
                "2016/10/30",
                "2016/11/6",
                "2016/11/13",
                "2016/11/20",
                "2016/11/27",
                "2016/12/4",
                "2016/12/11",
                "2016/12/18",
                "2016/12/25",
                "2017/1/1",
                "2017/1/8",
                "2017/1/15",
                "2017/1/22",
                "2017/1/29",
                "2017/2/5",
                "2017/2/12",
                "2017/2/19",
                "2017/2/26",
                "2017/3/5",
                "2017/3/12",
                "2017/3/19",
                "2017/3/26",
                "2017/4/2",
                "2017/4/9",
                "2017/4/16",
                "2017/4/23",
                "2017/4/30",
                "2017/5/7",
                "2017/5/14",
                "2017/5/21",
                "2017/5/28",
                "2017/6/4",
                "2017/6/11",
                "2017/6/18",
                "2017/6/25",
                "2017/7/2",
                "2017/7/9",
                "2017/7/16",
                "2017/7/23",
                "2017/7/30",
                "2017/8/6",
                "2017/8/13",
                "2017/8/20",
                "2017/8/27",
                "2017/9/3",
                "2017/9/10",
                "2017/9/17",
                "2017/9/24",
                "2017/10/1",
                "2017/10/15",
                "2017/10/22",
                "2017/10/29",
                "2017/11/5",
                "2017/11/12",
                "2017/11/19",
                "2017/11/26",
                "2017/12/3",
                "2017/12/10",
                "2017/12/17",
                "2017/12/24",
                "2017/12/31",
                "2018/1/7",
                "2018/1/14",
                "2018/1/21",
                "2018/1/28",
                "2018/2/4",
                "2018/2/11",
                "2018/2/18",
                "2018/2/25",
                "2018/3/4",
                "2018/3/11",
                "2018/3/18",
                "2018/3/25",
                "2018/4/1",
                "2018/4/8",
                "2018/4/15",
                "2018/4/22",
                "2018/4/29",
                "2018/5/6",
                "2018/5/13",
                "2018/5/20",
                "2018/5/27",
                "2018/6/3",
                "2018/6/10",
                "2018/6/17",
                "2018/6/24",
                "2018/7/1",
                "2018/7/8",
                "2018/7/15",
                "2018/7/22",
                "2018/7/29",
                "2018/8/5",
                "2018/8/12",
                "2018/8/19",
                "2018/8/26",
                "2018/9/2",
                "2018/9/9",
                "2018/9/16",
                "2018/9/23",
                "2018/9/30",
                "2018/10/14",
                "2018/10/21",
                "2018/10/28",
                "2018/11/4",
                "2018/11/11",
                "2018/11/18",
                "2018/11/25",
                "2018/12/2",
                "2018/12/9",
                "2018/12/16",
                "2018/12/23",
                "2018/12/30",
                "2019/1/6",
                "2019/1/13",
                "2019/1/20",
                "2019/1/27",
                "2019/2/3",
                "2019/2/17",
                "2019/2/24",
                "2019/3/3",
                "2019/3/10",
                "2019/3/17",
                "2019/3/24",
                "2019/3/31",
                "2019/4/7",
                "2019/4/14",
                "2019/4/21",
                "2019/4/28",
                "2019/5/5",
                "2019/5/12",
                "2019/5/19",
                "2019/5/26",
                "2019/6/2",
                "2019/6/9",
                "2019/6/16",
                "2019/6/23",
                "2019/6/30",
                "2019/7/7",
                "2019/7/14",
                "2019/7/21",
                "2019/7/28",
                "2019/8/4",
                "2019/8/11",
                "2019/8/18",
                "2019/8/25",
                "2019/9/1",
                "2019/9/8",
                "2019/9/15",
                "2019/9/22",
                "2019/9/29",
                "2019/10/6",
                "2019/10/13",
                "2019/10/20",
                "2019/10/27",
                "2019/11/3",
                "2019/11/10",
                "2019/11/17",
                "2019/11/24",
                "2019/12/1",
                "2019/12/8",
                "2019/12/15",
                "2019/12/22",
                "2019/12/29",
                "2020/1/5",
                "2020/1/12",
                "2020/1/19",
                "2020/1/26",
                "2020/2/9",
                "2020/2/16",
                "2020/2/23",
                "2020/3/1",
                "2020/3/8",
                "2020/3/15",
                "2020/3/22",
                "2020/3/29",
                "2020/4/5",
                "2020/4/12",
                "2020/4/19",
                "2020/4/26",
                "2020/5/3",
                "2020/5/10",
                "2020/5/17",
                "2020/5/24",
                "2020/5/31",
                "2020/6/7",
                "2020/6/14",
                "2020/6/21",
                "2020/6/28",
                "2020/7/5",
                "2020/7/12",
                "2020/7/19",
                "2020/7/26",
                "2020/8/2",
                "2020/8/9",
                "2020/8/16",
                "2020/8/23",
                "2020/8/30",
                "2020/9/6",
                "2020/9/13",
                "2020/9/20",
                "2020/9/27",
                "2020/10/4",
                "2020/10/11",
                "2020/10/18",
                "2020/10/25",
                "2020/11/1",
                "2020/11/8",
                "2020/11/15",
                "2020/11/22",
                "2020/11/29",
                "2020/12/6",
                "2020/12/13",
                "2020/12/20",
                "2020/12/27",
                "2021/1/3",
                "2021/1/10",
                "2021/1/17",
                "2021/1/24",
                "2021/1/31",
                "2021/2/7",
                "2021/2/14",
                "2021/2/21",
                "2021/2/28",
                "2021/3/7",
                "2021/3/14",
                "2021/3/21",
                "2021/3/28",
                "2021/4/4",
                "2021/4/11",
                "2021/4/18",
                "2021/4/25",
                "2021/5/2",
                "2021/5/9",
                "2021/5/16",
                "2021/5/23",
                "2021/5/30",
                "2021/6/6",
                "2021/6/13",
                "2021/6/20",
                "2021/6/27",
                "2021/7/4",
                "2021/7/11",
                "2021/7/18",
                "2021/7/25",
                "2021/8/1",
                "2021/8/8",
                "2021/8/15",
                "2021/8/22",
                "2021/8/29",
                "2021/9/5",
                "2021/9/12",
                "2021/9/19",
                "2021/9/26",
                "2021/10/3",
                "2021/10/10",
                "2021/10/17",
                "2021/10/24",
                "2021/10/31",
                "2021/11/7",
                "2021/11/14",
                "2021/11/21",
                "2021/11/28",
                "2021/12/5",
                "2021/12/12",
                "2021/12/19",
                "2021/12/26",
                "2022/1/2",
                "2022/1/9",
                "2022/1/16",
                "2022/1/23",
                "2022/1/30",
                "2022/2/13",
                "2022/2/20",
                "2022/2/27",
                "2022/3/6",
                "2022/3/13",
                "2022/3/20",
                "2022/3/27",
                "2022/4/3",
                "2022/4/10",
                "2022/4/17",
                "2022/4/24",
                "2022/5/1",
                "2022/5/8",
                "2022/5/15",
                "2022/5/22",
                "2022/5/29",
                "2022/6/5",
                "2022/6/12",
                "2022/6/19",
                "2022/6/26",
                "2022/7/3",
                "2022/7/10",
                "2022/7/17",
                "2022/7/24",
                "2022/7/31",
                "2022/8/7",
                "2022/8/14",
                "2022/8/21",
                "2022/8/28",
                "2022/9/4",
                "2022/9/11",
                "2022/9/18",
                "2022/9/25",
                "2022/10/2",
                "2022/10/16",
                "2022/10/23",
                "2022/10/30",
                "2022/11/6",
                "2022/11/13",
                "2022/11/20",
                "2022/11/27",
                "2022/12/4",
                "2022/12/11",
                "2022/12/18",
                "2022/12/25",
                "2023/1/1",
                "2023/1/8",
                "2023/1/15",
                "2023/1/22",
                "2023/2/5",
                "2023/2/12",
                "2023/2/19",
                "2023/2/26",
                "2023/3/5",
                "2023/3/12",
                "2023/3/19",
                "2023/3/26",
                "2023/4/2"
            ]
        },
        {
            "earning_rate": [
                0.001324268,
                0.00052624,
                0.000415382,
                0.000571737,
                -0.00016408,
                0.000225391,
                0.001578262,
                0.006038311,
                0.004778246,
                0.003427316,
                0.001983623,
                -0.004864745,
                -0.005904956,
                -0.007508485,
                -0.001286126,
                0.004831976,
                0.003953001,
                -0.002554193,
                0.001691255,
                0.002684235,
                -0.005720966,
                -0.002129317,
                -0.004461829,
                0.003695504,
                -0.001553264,
                0.000549242,
                0.00002289,
                0.002504326,
                0.002870789,
                -0.000111066,
                0.000943344,
                0.00319248,
                0.000361224,
                0.00073893,
                -0.001541331,
                0.000780283,
                -0.000425485,
                0.004758558,
                0.002632649,
                0.001311976,
                -0.001866463,
                -0.004904879,
                0.00089234,
                -0.003865996,
                0.001583998,
                0.002825277,
                -0.001623231,
                -0.000346598,
                0.000391043,
                0.002813562,
                0.00028953,
                0.00051039,
                0.001361075,
                0.002567807,
                -0.001704578,
                -0.001427512,
                0.000613865,
                -0.000949778,
                0.001548551,
                0.00001047,
                0.002135231,
                -0.000923651,
                -0.002466459,
                -0.003845332,
                0.001143508,
                0.000887037,
                0.001283913,
                -0.000674175,
                -0.001840709,
                -0.000448659,
                0.000415965,
                0.001372564,
                0.000548256,
                -0.0013432,
                0.000155624,
                -0.000951674,
                0.002133187,
                0.000261005,
                0.001113253,
                0.000566512,
                0.000349016,
                0.000308233,
                0.000250063,
                0.00004179,
                -0.00013987,
                -0.00014274,
                -0.000875051,
                -0.000777112,
                -0.000273142,
                0.000213112,
                0.000395529,
                -0.002218852,
                -0.000641311,
                0.00052125,
                -0.000301002,
                0.001393902,
                -0.001138127,
                0.001000001,
                -0.00007543,
                0.000439538,
                0.000123954,
                -0.00004782,
                -0.000166509,
                0.001040494,
                -0.000741355,
                -0.001645597,
                -0.000446693,
                -0.000923207,
                -0.001089258,
                0.000971248,
                -0.000251972,
                -0.000512291,
                0.001980835,
                0.00013472,
                -0.000374557,
                0.000140347,
                0.000847975,
                -0.000669335,
                -0.000929193,
                0.000579632,
                -0.000428707,
                -0.000773691,
                0.00175327,
                0.000835724,
                0.001442674,
                0.000914494,
                -0.0000614,
                0.00127792,
                -0.000263615,
                0.000804585,
                -0.000536014,
                -0.0000743,
                -0.000730414,
                0.001261845,
                -0.002360122,
                -0.00072338,
                0.001179925,
                -0.00068194,
                -0.00006,
                0.000127699,
                -0.000173171,
                0.000684028,
                -0.0016503,
                -0.001174669,
                0.0000524,
                -0.002584497,
                -0.001939445,
                0.000935452,
                0.000781432,
                0.001596022,
                0.001652621,
                -0.001099375,
                -0.0027704,
                0.003584097,
                -0.000140172,
                -0.000241841,
                0.000321392,
                -0.000664263,
                0.000380248,
                0.00061042,
                0.001096171,
                0.001948874,
                -0.000777291,
                0.000999449,
                -0.001342061,
                -0.002830098,
                0.001686476,
                -0.001325464,
                0.001070961,
                0.0001161,
                0.000626597,
                -0.003967617,
                0.001701555,
                -0.002626793,
                0.000398063,
                -0.001073428,
                -0.000445969,
                -0.001055606,
                0.001534032,
                0.0000595,
                -0.004496027,
                -0.002644788,
                0.000510057,
                0.003280061,
                -0.000484547,
                0.00388895,
                -0.003795824,
                0.000877688,
                0.000772309,
                -0.001119992,
                -0.001809545,
                -0.000283065,
                0.001172209,
                0.002056092,
                0.001454845,
                0.001135039,
                0.000700107,
                0.003111618,
                0.001906093,
                0.003184189,
                0.002583211,
                0.00088743,
                0.002236819,
                0.001317215,
                0.003404845,
                -0.002269867,
                0.003091615,
                -0.003279217,
                -0.002416837,
                -0.002047325,
                -0.001590477,
                -0.001759166,
                0.002227862,
                -0.005059238,
                0.001148479,
                0.003411162,
                -0.00134591,
                0.002418537,
                -0.005008862,
                0.000180732,
                0.001433258,
                0.000671226,
                -0.002545504,
                0.002288834,
                0.001512781,
                -0.000271535,
                0.003934766,
                0.002900901,
                0.0000962,
                -0.002540552,
                -0.000570545,
                -0.0000899,
                -0.000171057,
                0.0000909,
                -0.000126107,
                0.000603722,
                -0.001848292,
                -0.0003082,
                0.000679804,
                0.00264643,
                0.002083475,
                0.001768018,
                0.001042702,
                0.002192452,
                0.00444816,
                0.001280191,
                0.000652971,
                0.004830176,
                0.005593419,
                0.007045894,
                -0.003734671,
                0.003599734,
                -0.00488048,
                -0.006629423,
                -0.001874257,
                0.001959893,
                -0.000663979,
                0.002697211,
                -0.001190792,
                0.004900296,
                0.003046039,
                -0.000264074,
                -0.003247436,
                -0.000292822,
                0.003394388,
                0.001828918,
                0.002754951,
                0.001890542,
                0.002649975,
                0.008728881,
                -0.003593667,
                -0.0000181,
                0.004772574,
                0.001618089,
                -0.000622405,
                -0.00240997,
                -0.000240559,
                0.000498535,
                -0.004463253,
                0.006073176,
                -0.004118645,
                0.001299029,
                0.003771115,
                0.001191574,
                -0.003528201,
                0.001366324,
                0.002851125,
                0.002718478,
                0.000843072,
                0.000528425,
                0.001453836,
                0.002876426,
                0.003483895,
                0.003277126,
                0.000035601,
                0.001423472,
                0.00015424,
                0.008575468,
                -0.003595528,
                -0.003052728,
                0.003161568,
                -0.000176738,
                -0.00653874,
                0.000597218,
                -0.002185438,
                -0.000544995,
                0.001939834,
                0.002833201,
                0.000212463,
                -0.000216917,
                0.004957426,
                0.002894937,
                -0.003597994,
                0.002257942,
                0.00336585,
                0.0038176,
                0.000610357,
                0.003246106,
                -0.000737864,
                0.003496345,
                0.000973929,
                0.00609384,
                0.001694846,
                0.003934521,
                0.002118197,
                0.004416956,
                0.000368778,
                -0.001147669,
                0.005782864,
                -0.002952109,
                0.003593087,
                -0.001169697,
                0.002334616,
                -0.000368967,
                -0.001703261,
                0.006132547,
                0.000012801,
                0.006173839,
                -0.000282659,
                0.000856309,
                0.001392798,
                0.001886869,
                0.002334123,
                -0.001106902,
                -0.003106101,
                -0.001477693,
                0.001148515,
                -0.006881426,
                0.002251486,
                -0.002113956,
                -0.001365223,
                -0.003844839,
                0.004986448,
                0.005346171,
                -0.002414531,
                -0.002448652,
                0.00038483,
                -0.003650998,
                0.001122383,
                -0.00450848,
                -0.006967219,
                -0.003438501,
                0.004798367,
                -0.002015031,
                0.005801531,
                0.003842525,
                -0.003964156,
                0.004930594,
                0.003674569,
                0.002819839,
                0.003352185,
                0.00169255,
                0.001837863,
                -0.000566266,
                -0.001536101,
                -0.00197744,
                0.001557187,
                -0.000521526,
                0.001241863,
                -0.00281689,
                -0.00437905,
                0.003664291,
                -0.005631367,
                -0.001098189,
                -0.003472484,
                0.002859365,
                -0.001150124,
                -0.004005906,
                0.008495481,
                -0.001964285,
                -0.002167657,
                -0.002181373,
                0.000563275,
                0.000589142,
                -0.003786462,
                -0.004170001,
                0.002690818,
                0.0038607,
                0.000117443,
                0.003993349,
                0.000104106,
                -0.001439382,
                -0.004563439,
                0.000071351,
                -0.000339355,
                -0.002631058,
                -0.002371874,
                0.000797851,
                0.000313653
            ]
        }
    ]
}
const date = res['data'][0]['trading_date']
const data = res['data'][1]['earning_rate']
// 每一个data为一天的数据，现在计算data为此天之前的所有数据包括本天的加和
for (let i = 1; i < data.length; i++) {
  data[i] = data[i - 1] + data[i]
}
const option = ref({
  tooltip: {
    trigger: 'axis',
    position(pt) {
      return [pt[0], '100%']
    },
  },
  title: {
    left: 'center',
  },
  xAxis: {
    type: 'category',
    boundaryGap: false,
    data: date,
  },
  yAxis: {
    type: 'value',
    boundaryGap: [0, '100%'],
  },
  dataZoom: [
    {
      type: 'inside',
      start: 0,
      end: 100,
    },
    {
      start: 0,
      end: 100,
    },
  ],
  series: [
    {
      name: 'Result',
      type: 'line',
      symbol: 'none',
      sampling: 'lttb',
      itemStyle: {
        color: '#eb489a',
      },
      areaStyle: {
        color: new graphic.LinearGradient(0, 0, 0, 1, [
          {
            offset: 0,
            color: '#8c5cf4',
          },
          {
            offset: 1,
            color: '#eb489a',
          },
        ]),
      },
      data,
    },
  ],
})

</script>

<template>
  <VChart class="chart" :option="option" :theme="isDark ? '#121212' : 'light'" />
</template>

<style scoped>
.chart {
  height: 400px;
}
</style>
